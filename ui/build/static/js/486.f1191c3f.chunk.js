"use strict";(self.webpackChunkipadelclub=self.webpackChunkipadelclub||[]).push([[486],{6129:(e,a,r)=>{r.d(a,{A:()=>d});var t=r(5043),n=r(3193),o=r(9190),s=r(8265),l=r(7970),c=r(9722),i=r(579);const d=e=>{let{name:a,value:r,label:d,handleupdate:h}=e;const[u,p]=(0,t.useState)([]);return(0,t.useEffect)((()=>{(async()=>{try{const e=await c.A.get("/v1/catalogs/categories");p(e.data)}catch(e){console.error("Error fetching categories:",e)}})()}),[]),(0,i.jsxs)(n.A,{fullWidth:!0,children:[(0,i.jsx)(o.A,{id:"".concat(a,"-select-label"),children:d}),(0,i.jsx)(s.A,{labelId:"".concat(a,"-select-label"),id:"".concat(a,"-select"),value:r,label:d,onChange:h,name:a,children:u.map((e=>(0,i.jsx)(l.A,{value:e.ID,children:e.description},e.ID)))})]})}},9597:(e,a,r)=>{r.d(a,{A:()=>d});var t=r(5043),n=r(3193),o=r(9190),s=r(8265),l=r(7970),c=r(9722),i=r(579);const d=e=>{let{name:a,value:r,label:d,handleupdate:h}=e;const[u,p]=(0,t.useState)([]);return(0,t.useEffect)((()=>{(async()=>{try{const e=await c.A.get("/v1/catalogs/events");p(e.data)}catch(e){console.error("Error fetching events:",e)}})()}),[]),(0,i.jsxs)(n.A,{fullWidth:!0,children:[(0,i.jsx)(o.A,{id:"".concat(a,"-select-label"),children:d}),(0,i.jsx)(s.A,{labelId:"".concat(a,"-select-label"),id:"".concat(a,"-select"),value:r,label:d,onChange:h,name:a,children:u.map((e=>(0,i.jsx)(l.A,{value:e.ID,children:e.name},e.ID)))})]})}},1952:(e,a,r)=>{r.d(a,{A:()=>v});var t=r(9379),n=r(45),o=r(5043),s=r(6240),l=r(2110),c=r(9958),i=r(4496),d=r(9336),h=r(6494),u=r(579);const p=["border","boxShadow","children","content","contentClass","contentSX","darkTitle","secondary","shadow","sx","title"],m={"& .MuiCardHeader-action":{mr:0}},v=(0,o.forwardRef)(((e,a)=>{let{border:r=!0,boxShadow:o,children:v,content:g=!0,contentClass:x="",contentSX:A={},darkTitle:b,secondary:I,shadow:y,sx:j={},title:D}=e,C=(0,n.A)(e,p);const E=(0,s.A)();return(0,u.jsxs)(l.A,(0,t.A)((0,t.A)({ref:a},C),{},{sx:(0,t.A)({border:r?"1px solid":"none",borderColor:E.palette.primary[200]+25,":hover":{boxShadow:o?y||"0 2px 14px 0 rgb(32 40 45 / 8%)":"inherit"}},j),children:[D&&(0,u.jsx)(c.A,{sx:m,title:b?(0,u.jsx)(i.A,{variant:"h3",children:D}):D,action:I}),D&&(0,u.jsx)(d.A,{}),g&&(0,u.jsx)(h.A,{sx:A,className:x,children:v}),!g&&v]}))}))},9486:(e,a,r)=>{r.r(a),r.d(a,{default:()=>y});var t=r(9379),n=r(5043),o=r(5218),s=r(1596),l=r(4496),c=r(7353),i=r(7784),d=r(1906),h=r(794),u=r(4194),p=r(3892),m=r(899),v=r(1952),g=r(9597),x=r(6129),A=r(9722),b=r(579);const I=m.Ik({EventID:m.Yj().required("El evento es requerido"),CategoryID:m.Yj().required("La categor\xeda es requerida"),partnerPhone:m.Yj().required("El tel\xe9fono del compa\xf1ero es requerido").min(10,"El tel\xe9fono debe tener al menos 10 d\xedgitos")}),y=()=>{const[e,a]=(0,n.useState)({open:!1,message:"",severity:"success"}),[r,m]=(0,n.useState)(0),y=(0,p.Wx)({initialValues:{EventID:"",CategoryID:"",partnerPhone:"",partnerName:""},validationSchema:I,onSubmit:async e=>{try{let t={event_id:e.EventID,category_id:e.CategoryID,person1_id:JSON.parse(localStorage.getItem("user")).ID,person2_id:r};await A.A.post("/v1/inscription",t),a({open:!0,message:"Inscripci\xf3n exitosa",severity:"success"}),y.resetForm()}catch(t){a({open:!0,message:"Error en la inscripci\xf3n",severity:"error"})}}});return(0,b.jsxs)(v.A,{title:"Inscripci\xf3n a Evento",minHeight:"300px",children:[(0,b.jsx)(o.A,{maxWidth:"sm",children:(0,b.jsxs)(s.A,{elevation:3,style:{padding:"2rem",marginTop:"2rem"},children:[(0,b.jsx)(l.A,{variant:"h6",gutterBottom:!0,children:"Completa tu inscripci\xf3n"}),(0,b.jsxs)("form",{onSubmit:y.handleSubmit,children:[(0,b.jsx)(g.A,{name:"EventID",value:y.values.EventID,label:"Evento",handleupdate:y.handleChange,error:y.touched.EventID&&Boolean(y.errors.EventID),helperText:y.touched.EventID&&y.errors.EventID}),(0,b.jsx)(c.A,{mt:2,children:(0,b.jsx)(x.A,{name:"CategoryID",value:y.values.CategoryID,label:"Categor\xeda",handleupdate:y.handleChange,error:y.touched.CategoryID&&Boolean(y.errors.CategoryID),helperText:y.touched.CategoryID&&y.errors.CategoryID})}),(0,b.jsx)(i.A,{fullWidth:!0,margin:"normal",name:"partnerPhone",label:"Tel\xe9fono del compa\xf1ero",value:y.values.partnerPhone,onChange:async e=>{const{value:r}=e.target;if(y.setFieldValue("partnerPhone",r),r.length>=10)try{const e=await A.A.get("/v1/person/is-available?EventID=".concat(y.values.EventID,"&Phone=").concat(r,"&CategoryID=").concat(y.values.CategoryID));e.data&&e.data.data.name?(y.setFieldValue("partnerName","".concat(e.data.data.name," ").concat(e.data.data.lastName)),m(e.data.data.ID)):y.setFieldValue("partnerName","")}catch(t){console.error("Error buscando usuario:",t.data.error),a({open:!0,message:"Error buscando usuario",severity:"error"})}},error:y.touched.partnerPhone&&Boolean(y.errors.partnerPhone),helperText:y.touched.partnerPhone&&y.errors.partnerPhone}),(0,b.jsx)(i.A,{fullWidth:!0,margin:"normal",name:"partnerName",label:"Nombre del compa\xf1ero",value:y.values.partnerName,InputProps:{readOnly:!0}}),(0,b.jsx)(d.A,{type:"submit",variant:"contained",color:"primary",fullWidth:!0,style:{marginTop:"1rem"},children:"Inscribirse"})]})]})}),(0,b.jsx)(h.A,{open:e.open,autoHideDuration:6e3,onClose:()=>a((0,t.A)((0,t.A)({},e),{},{open:!1})),children:(0,b.jsx)(u.A,{onClose:()=>a((0,t.A)((0,t.A)({},e),{},{open:!1})),severity:e.severity,children:e.message})})]})}}}]);
//# sourceMappingURL=486.f1191c3f.chunk.js.map